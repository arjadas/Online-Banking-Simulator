import{u as v,b as w,j as e,F as T}from"./components-Bbc86ifj.js";import{I as b,C as D,a as m,B as C,T as i,A as h}from"./AuthenticatedLink-CJAQ6_MP.js";import{r as n}from"./index-D34nGoGN.js";import{u as S,T as g}from"./react-redux-TNJK1e1K.js";import{l as k}from"./auth.client-BVBRz5GD.js";import{G as P}from"./geist-provider-aLuppyM2.js";import"./use-geist-ui-context-DCQYMvz0.js";import"./toConsumableArray-tU9m1R9e.js";import"./index-BAMY2Nnw.js";import"./AuthProvider-DC0ulOoC.js";function J(){const s=v(),[l,d]=n.useState(null),{isDarkTheme:c,textScale:L}=S(t=>t.app),f=g.createFromLight({type:"light1",palette:{success:"#009dff"}}),x=g.createFromDark({type:"dark1",palette:{background:"#111111",success:"#009dff"}}),[p,u]=n.useState(!1),y=w();n.useEffect(()=>{s?.error&&d(s.error)},[s]);const j=async t=>{t.preventDefault();const E=t.currentTarget,r=new FormData(E);let a;u(!0);try{const o=await k(r.get("email"),r.get("password"));r.append("uid",o.uid),a=o.uid,y(r,{method:"post",action:"/login"})}catch(o){d(o.message)}finally{a&&localStorage.setItem("uid",a)}u(!1)};return e.jsx(P,{themes:[f,x],themeType:c?"dark1":"light1",children:e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:"100vh",backgroundColor:c?"#111111":"#EEEEEE"},children:[e.jsx(b,{width:"400px",style:{textAlign:"center",paddingBottom:30},src:"logo.png"}),e.jsxs(D,{width:"400px",style:{padding:10},children:[e.jsxs(T,{method:"post",onSubmit:j,style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsx(m,{name:"email",htmlType:"email",clearable:!0,placeholder:"Email",required:!0,width:"100%",crossOrigin:void 0,onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),e.jsx(m.Password,{name:"password",clearable:!0,placeholder:"Password",required:!0,width:"100%"}),e.jsx(C,{htmlType:"submit",type:"secondary",loading:p,disabled:p,placeholder:void 0,onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0,children:"Log in"})]}),l&&e.jsx(i,{style:{marginTop:10},type:"error",children:l}),e.jsxs(i,{p:!0,children:["Don't have an account? ",e.jsx(h,{to:"/signup",children:"Sign up"})]}),e.jsx(h,{to:"/forgotPassword",prefetch:"render",children:e.jsx(i,{p:!0,children:"Forgot your password?"})})]})]})})}export{J as default};
